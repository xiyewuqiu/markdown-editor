/*
 * 响应式工具样式
 * 定义响应式布局、断点、移动端适配等
 */

/* ===== 响应式断点定义 ===== */
/* 
 * 断点系统:
 * - xs: 0-479px (小型手机)
 * - sm: 480-767px (大型手机)
 * - md: 768-1023px (平板)
 * - lg: 1024-1439px (小型桌面)
 * - xl: 1440px+ (大型桌面)
 */

/* ===== 容器响应式 ===== */
.container {
    width: 100%;
    margin: 0 auto;
    padding: 0 var(--spacing-lg);
}

@media (min-width: 480px) {
    .container {
        max-width: 480px;
    }
}

@media (min-width: 768px) {
    .container {
        max-width: 768px;
        padding: 0 var(--spacing-xl);
    }
}

@media (min-width: 1024px) {
    .container {
        max-width: 1024px;
    }
}

@media (min-width: 1440px) {
    .container {
        max-width: 1440px;
    }
}

/* ===== 应用布局响应式 ===== */

/* 小型手机 (0-479px) */
@media (max-width: 479px) {
    .app-container {
        min-height: 100vh;
        display: flex;
        flex-direction: column;
    }
    
    .navbar {
        padding: var(--spacing-sm);
        min-height: 48px;
        flex-wrap: wrap;
        justify-content: center;
    }
    
    .nav-menu {
        gap: var(--spacing-xs);
        justify-content: center;
    }
    
    .nav-button {
        padding: var(--spacing-xs) var(--spacing-sm);
        font-size: 0.7rem;
        min-width: 60px;
    }
    
    .editor-container {
        flex-direction: column;
        padding: var(--spacing-xs);
        gap: var(--spacing-xs);
    }
    
    .editor-panel,
    .preview-panel {
        margin: 0;
        border-radius: var(--radius-md);
        min-height: 200px;
    }
    
    .line-numbers {
        display: none; /* 隐藏行号以节省空间 */
    }
    
    #editor {
        padding: var(--spacing-md);
        font-size: var(--text-sm);
    }
    
    .statusbar {
        padding: var(--spacing-xs);
        gap: var(--spacing-xs);
        flex-wrap: wrap;
        justify-content: center;
        min-height: 40px;
    }
    
    .statusbar span {
        font-size: 0.65rem;
        padding: 0.2rem 0.4rem;
    }
    
    /* 隐藏部分状态信息 */
    #status-words,
    #status-text {
        display: none;
    }
}

/* 大型手机 (480-767px) */
@media (min-width: 480px) and (max-width: 767px) {
    .navbar {
        padding: var(--spacing-sm);
        min-height: 52px;
    }
    
    .nav-button {
        padding: var(--spacing-sm) var(--spacing-md);
        font-size: var(--text-xs);
        min-width: 65px;
    }
    
    .editor-container {
        flex-direction: column;
        padding: var(--spacing-sm);
        gap: var(--spacing-sm);
    }
    
    .line-numbers {
        min-width: 2rem;
        max-width: 2.5rem;
        font-size: 0.7rem;
    }
    
    #editor {
        padding: var(--spacing-md);
        font-size: var(--text-sm);
    }
    
    .statusbar {
        padding: var(--spacing-sm);
        gap: var(--spacing-sm);
    }
    
    #status-words {
        display: none;
    }
}

/* 平板 (768-1023px) */
@media (min-width: 768px) and (max-width: 1023px) {
    .navbar {
        padding: var(--spacing-md);
        min-height: 56px;
    }
    
    .editor-container {
        flex-direction: column;
        padding: var(--spacing-md);
        gap: var(--spacing-md);
    }
    
    .editor-panel {
        margin-right: 0;
        margin-bottom: var(--spacing-sm);
    }
    
    .preview-panel {
        margin-left: 0;
        margin-top: var(--spacing-sm);
    }
    
    .line-numbers {
        min-width: 2.5rem;
        max-width: 3rem;
    }
    
    /* 平板模式下的视图切换 */
    .view-split .editor-container {
        flex-direction: row;
    }
    
    .view-split .editor-panel {
        margin-right: var(--spacing-sm);
        margin-bottom: 0;
    }
    
    .view-split .preview-panel {
        margin-left: var(--spacing-sm);
        margin-top: 0;
    }
}

/* 小型桌面 (1024-1439px) */
@media (min-width: 1024px) and (max-width: 1439px) {
    .navbar {
        padding: var(--spacing-md) var(--spacing-lg);
        min-height: 60px;
    }
    
    .editor-container {
        padding: var(--spacing-lg);
    }
    
    .nav-button {
        min-width: 75px;
    }
}

/* 大型桌面 (1440px+) */
@media (min-width: 1440px) {
    .navbar {
        padding: var(--spacing-lg) var(--spacing-xl);
        min-height: 64px;
    }
    
    .editor-container {
        padding: var(--spacing-xl);
    }
    
    .nav-button {
        min-width: 80px;
        padding: var(--spacing-md) var(--spacing-lg);
    }
    
    .dropdown-menu {
        min-width: 240px;
    }
    
    .menu-item {
        padding: var(--spacing-lg) var(--spacing-xl);
    }
}

/* ===== 显示/隐藏工具类 ===== */

/* 仅在特定断点显示 */
.show-xs { display: block; }
.show-sm { display: none; }
.show-md { display: none; }
.show-lg { display: none; }
.show-xl { display: none; }

@media (min-width: 480px) {
    .show-xs { display: none; }
    .show-sm { display: block; }
}

@media (min-width: 768px) {
    .show-sm { display: none; }
    .show-md { display: block; }
}

@media (min-width: 1024px) {
    .show-md { display: none; }
    .show-lg { display: block; }
}

@media (min-width: 1440px) {
    .show-lg { display: none; }
    .show-xl { display: block; }
}

/* 在特定断点隐藏 */
.hide-xs { display: none; }
.hide-sm { display: block; }
.hide-md { display: block; }
.hide-lg { display: block; }
.hide-xl { display: block; }

@media (min-width: 480px) {
    .hide-xs { display: block; }
    .hide-sm { display: none; }
}

@media (min-width: 768px) {
    .hide-sm { display: block; }
    .hide-md { display: none; }
}

@media (min-width: 1024px) {
    .hide-md { display: block; }
    .hide-lg { display: none; }
}

@media (min-width: 1440px) {
    .hide-lg { display: block; }
    .hide-xl { display: none; }
}

/* ===== 触摸设备优化 ===== */
@media (hover: none) and (pointer: coarse) {
    /* 增加触摸目标大小 */
    .nav-button,
    .menu-item,
    .context-menu-item {
        min-height: 44px;
        padding: var(--spacing-md) var(--spacing-lg);
    }
    
    /* 移除悬停效果 */
    .nav-button:hover,
    .menu-item:hover,
    .context-menu-item:hover {
        background: none;
        transform: none;
    }
    
    /* 增强点击反馈 */
    .nav-button:active,
    .menu-item:active,
    .context-menu-item:active {
        background: rgba(102, 126, 234, 0.2);
        transform: scale(0.98);
    }
    
    /* 优化下拉菜单 */
    .dropdown-menu {
        position: fixed;
        top: 50% !important;
        left: 50% !important;
        transform: translate(-50%, -50%) !important;
        max-height: 80vh;
        overflow-y: auto;
    }
}

/* ===== 横屏模式优化 ===== */
@media (orientation: landscape) and (max-height: 600px) {
    .navbar {
        min-height: 48px;
        padding: var(--spacing-sm) var(--spacing-md);
    }
    
    .statusbar {
        height: 40px;
        padding: 0 var(--spacing-md);
    }
    
    .editor-container {
        padding: var(--spacing-sm);
    }
    
    .dropdown-menu {
        max-height: 60vh;
        overflow-y: auto;
    }
}

/* ===== 高分辨率屏幕优化 ===== */
@media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
    .navbar,
    .editor-panel,
    .preview-panel,
    .statusbar {
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
    }
    
    /* 优化边框渲染 */
    .editor-panel,
    .preview-panel {
        border-width: 0.5px;
    }
}

/* ===== 打印样式 ===== */
@media print {
    .navbar,
    .statusbar,
    .dropdown-menu,
    .context-menu,
    .notification {
        display: none !important;
    }
    
    .editor-container {
        flex-direction: column;
        padding: 0;
        gap: 0;
    }
    
    .editor-panel {
        display: none !important;
    }
    
    .preview-panel {
        margin: 0;
        padding: var(--spacing-lg);
        border: none;
        box-shadow: none;
        background: white;
        color: black;
    }
    
    .line-numbers {
        display: none;
    }
}

/* ===== 无障碍媒体查询 ===== */
@media (prefers-reduced-motion: reduce) {
    .editor-panel,
    .preview-panel {
        animation: none;
    }
    
    .dropdown-menu,
    .context-menu {
        transition: none;
    }
}

@media (prefers-color-scheme: dark) {
    :root:not([data-theme]) {
        /* 自动应用深色主题变量 */
        --color-bg: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
        --color-bg-solid: #0f172a;
        --color-fg: #f1f5f9;
        --color-fg-secondary: #94a3b8;
    }
}
